!function(){"use strict";const t=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.FormieTranslations&&(t=window.FormieTranslations[t]||t),t.replace(/{([a-zA-Z0-9]+)}/g,((t,i)=>e[i]?e[i]:t))};window.FormieFileUpload=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$form=t.$form,this.form=this.$form.form,this.$field=t.$field,this.form.registerEvent("registerFormieValidation",this.registerValidation.bind(this)),this.form.addEventListener(this.$form,function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e||(e=Math.random().toString(36).substr(2,5)),`${t}.${e}`}("FormieFileUpload"),this.onUploadedAsset.bind(this))}registerValidation(e){e.validator.addValidator("fileSizeMinLimit",(t=>{let{input:e}=t;const i=e.getAttribute("type"),r=e.getAttribute("data-size-min-limit"),l=1e3*parseFloat(r)*1e3;if("file"!==i||!l)return!0;for(const t of e.files)if(t.size<l)return!1;return!0}),(e=>{let{input:i}=e;return t("File must be larger than {filesize} MB.",{filesize:i.getAttribute("data-size-min-limit")})})),e.validator.addValidator("fileSizeMaxLimit",(t=>{let{input:e}=t;const i=e.getAttribute("type"),r=e.getAttribute("data-size-max-limit"),l=1e3*parseFloat(r)*1e3;if("file"!==i||!l)return!0;for(const t of e.files)if(t.size>l)return!1;return!0}),(e=>{let{input:i}=e;return t("File must be smaller than {filesize} MB.",{filesize:i.getAttribute("data-size-max-limit")})})),e.validator.addValidator("fileLimit",(t=>{let{input:e}=t;const i=e.getAttribute("type"),r=parseInt(e.getAttribute("data-file-limit"));return"file"!==i||!r||!(e.files.length>r)}),(e=>{let{input:i}=e;return t("Choose up to {files} files.",{files:i.getAttribute("data-file-limit")})}))}onUploadedAsset(t){const{data:e}=t.detail,i=this.$field.querySelector('[type="file"]'),r=this.$field.getAttribute("data-field-handle");if(e&&e[r]){const t=e[r];let l=this.$field.querySelector('input[type="hidden"][value=""]');const n=`${l.getAttribute("name")}[]`;this.$field.querySelectorAll('input[type="hidden"]').forEach((t=>{if(t.value)return t.remove()})),t.forEach((t=>{const e=document.createElement("input");e.type="hidden",e.name=n,e.value=t,l.insertAdjacentElement("afterend",e),l=e})),i&&(i.value=null)}}}}();