!function(){"use strict";window.FormieSummary=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$form=t.$form,this.form=this.$form.form,this.$field=t.$field,this.fieldId=t.fieldId,this.loadingClass=this.form.getClasses("loading"),this.submissionId=null,this.debouncedFetch=this.debounce(this.fetchSummary.bind(this),300),"ajax"===this.form.settings.submitMethod&&this.initVisibilityObserver()}initVisibilityObserver(){new IntersectionObserver((t=>{t[0].intersectionRatio>0&&this.onFieldVisible()}),{root:this.$form,rootMargin:"50px"}).observe(this.$field)}onFieldVisible(){const t=this.$form.querySelector('[name="submissionId"]');t&&(this.submissionId=t.value),this.submissionId?(this.$field.dispatchEvent(new CustomEvent("onFieldVisible",{bubbles:!0,detail:{summary:this}})),this.debouncedFetch()):console.error("Summary field: Unable to find `submissionId`")}fetchSummary(){const t=this.$field.querySelector("[data-summary-blocks]");if(!t)return void console.error("Summary field: Unable to find `container`");var e,s;this.loadingClass&&(e=t,s=this.loadingClass,e&&s&&("string"==typeof s&&(s=s.split(" ")),s.forEach((t=>{e.classList.add(t)}))));const i=function(t,e,s,i,o,n){const r=new XMLHttpRequest;r.open(e,s,i,o,n),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("Cache-Control","no-cache");const a=new CustomEvent("modifyAjaxClient",{bubbles:!0,detail:{client:r}});return t.dispatchEvent(a),a.detail.client}(this.$form,"POST",window.location.href,!0);i.onload=()=>{this.loadingClass&&function(t,e){t&&e&&("string"==typeof e&&(e=e.split(" ")),e.forEach((e=>{t.classList.remove(e)})))}(t,this.loadingClass),i.status>=200&&i.status<300&&(t.parentNode.innerHTML=i.responseText),this.$field.dispatchEvent(new CustomEvent("onFetchSummary",{bubbles:!0,detail:{summary:this,data:i}}))};const o={action:"formie/fields/get-summary-html",submissionId:this.submissionId,fieldId:this.fieldId},n=new FormData;for(const t in o)n.append(t,o[t]);i.send(n)}debounce(t,e){var s=this;let i;return function(){for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];i&&clearTimeout(i),i=setTimeout((()=>{t.apply(s,n)}),e)}}}}();